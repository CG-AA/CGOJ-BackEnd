<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CGOJ-BackEnd: src/CROW_ROUTEs/login.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CGOJ-BackEnd
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_67e81576e3c341b6c115a1fe285e2d70.html">CROW_ROUTEs</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">login.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the login route.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="login_8hpp_source.html">login.hpp</a>&quot;</code><br />
<code>#include &lt;bcrypt/BCrypt.hpp&gt;</code><br />
<code>#include &quot;<a class="el" href="jwt_8hpp_source.html">../Programs/jwt.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for login.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="login_8cpp__incl.png" border="0" usemap="#asrc_2CROW__ROUTEs_2login_8cpp" alt=""/></div>
<map name="asrc_2CROW__ROUTEs_2login_8cpp" id="asrc_2CROW__ROUTEs_2login_8cpp">
<area shape="rect" title="Implementation of the login route." alt="" coords="453,5,661,31"/>
<area shape="rect" href="login_8hpp.html" title="Header file for the login route." alt="" coords="365,79,447,104"/>
<area shape="poly" title=" " alt="" coords="534,33,444,75,442,70,531,28"/>
<area shape="rect" title=" " alt="" coords="655,79,794,104"/>
<area shape="poly" title=" " alt="" coords="585,28,686,71,684,76,583,33"/>
<area shape="rect" href="jwt_8hpp.html" title="Header file for the JSON Web Token (JWT) functions." alt="" coords="483,79,631,104"/>
<area shape="poly" title=" " alt="" coords="559,31,559,65,554,65,554,31"/>
<area shape="rect" title=" " alt="" coords="37,152,101,177"/>
<area shape="poly" title=" " alt="" coords="365,103,114,154,113,149,364,98"/>
<area shape="rect" title=" " alt="" coords="125,152,309,177"/>
<area shape="poly" title=" " alt="" coords="377,107,261,149,260,144,375,102"/>
<area shape="rect" title=" " alt="" coords="333,152,479,177"/>
<area shape="poly" title=" " alt="" coords="409,104,409,138,403,138,403,104"/>
<area shape="rect" href="api_8hpp.html" title="Header file for the APIs class." alt="" coords="503,152,610,177"/>
<area shape="poly" title=" " alt="" coords="431,102,521,144,518,148,429,106"/>
<area shape="rect" title=" " alt="" coords="5,225,124,251"/>
<area shape="poly" title=" " alt="" coords="504,178,492,180,317,204,138,228,138,223,316,199,491,175,503,173"/>
<area shape="rect" title=" " alt="" coords="149,225,301,251"/>
<area shape="poly" title=" " alt="" coords="504,180,292,225,291,220,503,175"/>
<area shape="rect" title=" " alt="" coords="325,225,455,251"/>
<area shape="poly" title=" " alt="" coords="531,180,431,222,429,217,529,175"/>
<area shape="rect" title=" " alt="" coords="479,225,635,251"/>
<area shape="poly" title=" " alt="" coords="559,178,559,212,554,212,554,178"/>
<area shape="rect" title=" " alt="" coords="659,225,809,251"/>
<area shape="poly" title=" " alt="" coords="586,175,694,218,692,223,584,180"/>
<area shape="rect" title=" " alt="" coords="833,225,992,251"/>
<area shape="poly" title=" " alt="" coords="611,174,842,220,841,225,610,179"/>
<area shape="rect" title=" " alt="" coords="1017,225,1241,251"/>
<area shape="poly" title=" " alt="" coords="611,173,622,175,823,201,1003,221,1002,227,822,206,622,180,610,178"/>
<area shape="poly" title=" " alt="" coords="534,106,444,148,442,144,531,102"/>
<area shape="poly" title=" " alt="" coords="559,104,559,138,554,138,554,104"/>
<area shape="rect" title=" " alt="" coords="634,152,693,177"/>
<area shape="poly" title=" " alt="" coords="575,102,636,142,633,147,572,106"/>
<area shape="rect" title=" " alt="" coords="717,152,823,177"/>
<area shape="poly" title=" " alt="" coords="592,101,723,145,722,150,590,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a00f361d5fb17810dec7d8826a2496d2b" id="r_a00f361d5fb17810dec7d8826a2496d2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00f361d5fb17810dec7d8826a2496d2b">ROUTE_Login</a> (crow::App&lt; crow::CORSHandler &gt; &amp;<a class="el" href="main_8cpp.html#afce6e82e7f4ddd54d9bbf8894ccc85ab">app</a>, nlohmann::json &amp;<a class="el" href="main_8cpp.html#a226e5c87ec0382336e0be64e07be3723">settings</a>, std::string <a class="el" href="main_8cpp.html#a57430442c3d9a40c976af8e13ab34029">IP</a>, std::unique_ptr&lt; <a class="el" href="classAPIs.html">APIs</a> &gt; &amp;sqlAPI)</td></tr>
<tr class="memdesc:a00f361d5fb17810dec7d8826a2496d2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the login functionality as a POST route using the CROW library.  <br /></td></tr>
<tr class="separator:a00f361d5fb17810dec7d8826a2496d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the login route. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a00f361d5fb17810dec7d8826a2496d2b" name="a00f361d5fb17810dec7d8826a2496d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f361d5fb17810dec7d8826a2496d2b">&#9670;&#160;</a></span>ROUTE_Login()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ROUTE_Login </td>
          <td>(</td>
          <td class="paramtype">crow::App&lt; crow::CORSHandler &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>app</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">nlohmann::json &amp;</td>          <td class="paramname"><span class="paramname"><em>settings</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string</td>          <td class="paramname"><span class="paramname"><em>IP</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classAPIs.html">APIs</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>sqlAPI</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implements the login functionality as a POST route using the CROW library. </p>
<p>This function sets up a POST route at "/login" for user authentication. It expects a JSON payload in the request body containing the user's email and password. The function then queries the database for a user with the provided email. If a user is found, it validates the password using BCrypt. Upon successful validation, it generates a JSON Web Token (JWT) using the user's ID, the application settings, and the server IP address. The JWT is then returned to the client. If the email or password is invalid, it returns an error message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">app</td><td>The CROW application object used to define the route. </td></tr>
    <tr><td class="paramname">settings</td><td>A JSON object containing the application settings, including permissions. </td></tr>
    <tr><td class="paramname">IP</td><td>The IP address of the backend server. </td></tr>
    <tr><td class="paramname">sqlAPI</td><td>A pointer to the SQL API object for database operations.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The route is defined to listen for POST requests only. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
